<div style="height:410px">
    <div class="col-xs-12 col-sm-12 col-md-12 text-center" style="margin:0px;padding:0px">
        <span class="col-xs-3 col-sm-3 col-md-3 btn nowrap-truncate" ng-class="resultIndex === 0 ? 'btn-info' : 'btn-default'" style="margin:0px;padding:0px;line-height:30px;border-top-left-radius:25px" ng-click="setResultIndex(0)">Result </span> 
        <span class="col-xs-2 col-sm-2 col-md-2 btn nowrap-truncate" ng-class="resultIndex === 1 ? 'btn-info' : 'btn-default'" style="margin:0px;padding:0px;line-height:30px;" ng-click="setResultIndex(1)">Buffs </span> 
        <span class="col-xs-2 col-sm-2 col-md-2 btn nowrap-truncate" ng-class="resultIndex === 5 ? 'btn-info' : 'btn-default'" style="margin:0px;padding:0px;line-height:30px;" ng-click="setResultIndex(5)">Debuffs </span>
        <span class="col-xs-2 col-sm-2 col-md-2 btn nowrap-truncate" ng-class="resultIndex === 3 ? 'btn-info' : 'btn-default'" style="margin:0px;padding:0px;line-height:30px;" ng-click="setResultIndex(3)">Psychic </span>
        <span class="col-xs-3 col-sm-3 col-md-3 btn nowrap-truncate" ng-class="resultIndex === 2 ? 'btn-info' : 'btn-default'" style="margin:0px;padding:0px;line-height:30px;border-top-right-radius:25px" ng-click="setResultIndex(2)">Bard Song </span>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12" style="overflow-y:auto;height:360px;padding:0px">
         <div ng-if="resultIndex === 0">
             <div class="text-center" ng-show="lastEvent.type === 'ROLLER'">
                <h1><strong> {{lastEvent.sub}}</strong></h1>
                <span style="font-size:30px">{{lastEvent.result}}</span>
            </div>
            <div class="text-center" ng-show="lastEvent.type === 'INIT'">
                <h1><strong>Initiative Roll</strong></h1>
                <span style="font-size:72px">{{lastEvent.result}}({{lastEvent.roll}})</span>
            </div>
            <div class="text-center" ng-show="lastEvent.type === 'SAVE'">
                <div class="text-center" ng-show="lastEvent.sub === 'FORT'">
                    <h1><strong>Fortitude Save</strong></h1>
                    <span style="font-size:72px">{{lastEvent.save}}({{lastEvent.roll}})</span>
                </div>
                <div class="text-center" ng-show="lastEvent.sub === 'REFLEX'">
                    <h1><strong>Reflex Save</strong></h1>
                    <span style="font-size:72px">{{lastEvent.save}}({{lastEvent.roll}})</span>
                </div>
                <div class="text-center" ng-show="lastEvent.sub === 'WILL'">
                    <h1><strong>Will Save</strong></h1>
                    <span style="font-size:72px">{{lastEvent.save}}({{lastEvent.roll}})</span>
                </div>
            </div>
             <div class="text-center" ng-show="lastEvent.type === 'ATTACK'">
                <div class="text-center" >
                    <h1 ng-show="lastEvent.sub === 'MELEE'" style="margin:0;margin-top: 10px"><strong>Melee Attack</strong></h1>
                    <h1 ng-show="lastEvent.sub === 'RANGE'" style="margin:0;margin-top: 10px"><strong>Range Attack</strong></h1>
                    <h1 ng-show="lastEvent.sub === 'POLY'" style="margin:0;margin-top: 10px"><strong>Polymorph Attack</strong></h1>
                    <h1 ng-show="lastEvent.sub === 'MELEE_SNEAK'" style="margin:0;margin-top: 10px"><strong>Sneak Attack (Melee)</strong></h1>
                    <h1 ng-show="lastEvent.sub === 'RANGE_SNEAK'" style="margin:0;margin-top: 10px"><strong>Sneak Attack (Range)</strong></h1>
                    <h1 ng-show="lastEvent.sub === 'MELEE_SUBDUAL'" style="margin:0;margin-top: 10px"><strong>Melee Subdual</strong></h1>
                    <div class="text-center text-danger" ng-show="lastEvent.isImmune === true" style="margin-top:20px">
                        <span style="font-size:32px">{{lastEvent.immuneText}}</span>
                    </div>
                    <div class="text-center" ng-show="lastEvent.isMiss === true">
                        <span class="text-danger" style="font-size:72px">Miss!!!</span>
                        <div class="col-xs-12 text-center" style="margin-top:15px">
                            <h2 style="margin:0px">Main Hand Roll: {{lastEvent.mRoll}}</h2>
                        </div>
                        <div class="col-xs-12 text-center" style="margin-top:15px" ng-if="lastEvent.oRoll > 2">
                            <h2 style="margin:0px">Offhand Roll: {{lastEvent.oRoll}}</h2>
                        </div>
                    </div>
                    <div class="text-center" style="margin-top:15px" ng-show="lastEvent.isMiss !== true">
                        <div class="text-center" ng-if="lastEvent.sub === 'POLY' || lastEvent.sub === 'MELEE_SUBDUAL' || (lastEvent.sub === 'MELEE_SNEAK' && lastEvent.isImmune === false) || (lastEvent.sub === 'RANGE_SNEAK' && lastEvent.isImmune === false) || (lastEvent.sub === 'MELEE' && characterContext.stats.meleeOffhandHit === undefined) || (lastEvent.sub === 'RANGE' && (lastEvent.isOffhandAttack === undefined || lastEvent.isOffhandAttack === false))">
                            <div class="col-xs-6">
                                <div class="col-xs-12">
                                    <h2 style="margin:0px"><strong><u>Hit</u></strong></h2>
                                </div>
                                <div class="col-xs-12">
                                    <h2 style="margin:0px"><strong>{{lastEvent.mRollTotal}}({{lastEvent.mRoll}})</strong></h2>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="col-xs-12">
                                    <h2 style="margin:0px"><strong><u>Damage</u></strong></h2>
                                </div>
                                <div class="col-xs-12">
                                    <h2 style="margin:0px"><strong>{{lastEvent.mDmg}}({{lastEvent.mWheel}})</strong></h2>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" ng-if="lastEvent.isCrit === true">
                                <div class="col-xs-12 text-center text-success" style="margin-top:15px">
                                    <h2 style="margin:0px"><strong>Critical!!!</strong></h2>
                                </div>
                                <div class="col-xs-12 text-center" style="margin-top:15px">
                                    <h2 style="margin:0px"><strong>Critical Total: {{lastEvent.critTotal}}</strong></h2>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" ng-if="lastEvent.isCrit === false">
                                <div class="col-xs-12 text-center" style="margin-top:15px">
                                    <h2 style="margin:0px"><strong>Total Damage: {{lastEvent.totalDmg}}</strong></h2>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" style="margin-top:15px">
                                <div style="display:flex;justify-content: center">
                                    <div ng-if="lastEvent.fire > 0">
                                        <img src="images/fire.png" width="22px" style="padding:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.fire}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.cold > 0" style="margin-left:15px">
                                        <img src="images/cold.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.cold}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.shock > 0" style="margin-left:15px">
                                        <img src="images/shock.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.shock}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.sonic > 0" style="margin-left:15px">
                                        <img src="images/sonic.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.sonic}}</b></span>                     
                                    </div>
                                    <div ng-if="lastEvent.eldritch > 0" style="margin-left:15px">
                                        <img src="images/eldritch.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.eldritch}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.poison > 0" style="margin-left:15px">
                                        <img src="images/poison.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.poison}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.darkrift > 0" style="margin-left:15px">
                                        <img src="images/darkrift.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.darkrift}}</b></span> 
                                    </div>
                                    <div ng-if="lastEvent.sacred > 0" style="margin-left:15px">
                                        <img src="images/sacred.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.sacred}}</b></span>   
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" style="margin-top:15px" ng-if="lastEvent.mWeaponExp !== null">
                                <h2 style="margin:0px">{{lastEvent.mWeaponExp}}</h2>
                            </div>
                            <div class="col-xs-12 text-center" style="margin-top:15px" ng-if="lastEvent.sWeaponExp !== null">
                                <h2 style="margin:0px">{{lastEvent.sWeaponExp}}</h2>
                            </div>
                        </div>  
                        <div class="text-center" ng-if="(lastEvent.sub === 'MELEE' && characterContext.stats.meleeOffhandHit !== undefined) || (lastEvent.sub === 'RANGE' && lastEvent.isOffhandAttack === true)">
                            <div class="col-xs-6">
                                <div class="col-xs-12">
                                    <h3 style="margin:0px"><strong><u>Hit</u></strong></h3>
                                </div>
                                <div class="col-xs-12">
                                    <h4 style="margin:0px"><strong>Mainhand: {{lastEvent.mRollTotal}}({{lastEvent.mRoll}})</strong></h4>
                                </div>
                                <div class="col-xs-12">
                                    <h4 style="margin:0px"><strong>Offhand: {{lastEvent.oRollTotal}}({{lastEvent.oRoll}})</strong></h4>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="col-xs-12">
                                    <h3 style="margin:0px"><strong><u>Damage</u></strong></h3>
                                </div>
                                <div class="col-xs-12">
                                    <h4 style="margin:0px"><strong>Mainhand: {{lastEvent.mDmg}}({{lastEvent.mWheel}})</strong></h4>
                                </div>
                                <div class="col-xs-12">
                                    <h4 style="margin:0px"><strong>Offhand: {{lastEvent.oDmg}}({{lastEvent.oWheel}})</strong></h4>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" ng-if="lastEvent.isCrit === false">
                                <div class="col-xs-12 text-center" style="margin-top:12px">
                                    <h3 style="margin:0px"><strong>Total Damage: {{lastEvent.totalDmg}}</strong></h3>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" ng-if="lastEvent.isCrit === true">
                                <div class="col-xs-12 text-center text-success" style="margin-top:10px">
                                    <h3 style="margin:0px"><strong>Critical!!!</strong></h3>
                                </div>
                                <div class="col-xs-12 text-center" style="margin-top:10px" ng-if="lastEvent.mCrit > 0">
                                    <h3 style="margin:0px"><strong>Mainhand Critical: {{lastEvent.mCrit}}</strong></h3>
                                </div>
                                <div class="col-xs-12 text-center" style="margin-top:10px" ng-if="lastEvent.oCrit > 0">
                                    <h3 style="margin:0px"><strong>Offhand Critical: {{lastEvent.oCrit}}</strong></h3>
                                </div>
                                <div class="col-xs-12 text-center" style="margin-top:10px">
                                    <h3 style="margin:0px"><strong>Critical Total: {{lastEvent.critTotal}}</strong></h3>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" style="margin-top:15px">
                                <div style="display:flex;justify-content: center">
                                    <div ng-if="lastEvent.fire > 0">
                                        <img src="images/fire.png" width="22px" style="padding:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.fire}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.cold > 0" style="margin-left:15px">
                                        <img src="images/cold.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.cold}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.shock > 0" style="margin-left:15px">
                                        <img src="images/shock.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.shock}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.sonic > 0" style="margin-left:15px">
                                        <img src="images/sonic.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.sonic}}</b></span>                     
                                    </div>
                                    <div ng-if="lastEvent.eldritch > 0" style="margin-left:15px">
                                        <img src="images/eldritch.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.eldritch}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.poison > 0" style="margin-left:15px">
                                        <img src="images/poison.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.poison}}</b></span>
                                    </div>
                                    <div ng-if="lastEvent.darkrift > 0" style="margin-left:15px">
                                        <img src="images/darkrift.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.darkrift}}</b></span> 
                                    </div>
                                    <div ng-if="lastEvent.sacred > 0" style="margin-left:15px">
                                        <img src="images/sacred.png" width="22px" style="padding-left:0px;margin-top:-9px;"/><span style="font-size:22px"><b>: {{lastEvent.sacred}}</b></span>   
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 text-center" style="margin-top:15px" ng-if="lastEvent.mWeaponExp !== null">
                                <h3 style="margin:0px">{{lastEvent.mWeaponExp}}</h3>
                            </div>
                            <div class="col-xs-12 text-center" style="margin-top:15px" ng-if="lastEvent.sWeaponExp !== null">
                                <h3 style="margin:0px">{{lastEvent.sWeaponExp}}</h3>
                            </div>
                            <div class="col-xs-12 text-center" style="margin-top:15px" ng-if="lastEvent.oWeaponExp !== null">
                                <h3 style="margin:0px">{{lastEvent.oWeaponExp}}</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-if="resultIndex === 1">
            <div class="col-xs-12 col-sm-12 col-md-12" style="margin-top:15px;"></div>
            <div class="col-xs-12 col-sm-12 col-md-12 text-center" style="margin:0px;padding:15px">
                <span class="col-xs-6 col-sm-6 col-md-6 btn" ng-class="activeIndex === 0 ? 'btn-info' : 'btn-default'" style="margin:0px;padding:0px;line-height:30px;" ng-click="setActiveIndex(0)">Available </span> 
                <span class="col-xs-6 col-sm-6 col-md-6 btn" ng-class="activeIndex === 1 ? 'btn-info' : 'btn-default'" style="margin:0px;padding:0px;line-height:30px;" ng-click="setActiveIndex(1)">Active </span> 
            </div>
            <div class="table-responsive col-xs-12" style="border:none" ng-if="activeIndex === 0 ">          
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Name</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat-start="buff in characterContext.availableBuffs" ng-repeat-end>
                            <td>
                                <button class="btn btn-primary" ng-click="activateBuff(buff)" style="width:100%">
                                    Activate
                                </button>
                            </td>
                            <td>{{buff.name}}</td>
                            <td ng-if="!buff.canBeLevel">{{buff.displayText}}</td>
                            <td ng-if="buff.canBeLevel">      
                                <input class="form-control" type="number" onkeypress="return (event.charCode == 8 || event.charCode == 0 || event.charCode == 13) ? null : event.charCode >= 48 && event.charCode <= 57" ng-model="buff.level" />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="table-responsive col-xs-12" style="border:none" ng-if="activeIndex === 1">          
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Name</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat-start="buff in characterContext.buffs" ng-repeat-end>
                            <td ng-if="buff.bardsong === false">
                                <button class="btn btn-primary" ng-click="removeBuff(buff)" style="width:100%">
                                    Remove
                                </button>
                            </td>
                            <td ng-if="buff.bardsong === false">{{buff.name}}</td>
                            <td ng-if="buff.bardsong === false && !buff.canBeLevel">{{buff.displayText}}</td>
                            <td ng-if="buff.bardsong === false && buff.canBeLevel">{{buff.level}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div ng-if="resultIndex === 5">
            <div class="col-xs-12 col-sm-12 col-md-12" style="margin-top:15px;"></div>
            <div class="table-responsive col-xs-12" style="border:none">          
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Stacks</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat-start="debuff in characterContext.debuffs" ng-repeat-end>
                            <td>{{debuff.name}}</td>
                            <td>{{debuff.displayText}}</td>
                            <td><a ng-click="removeDebuff(debuff)" href=""><span class="fa fa-minus" style="font-size:14px;"></span></a> {{debuff.level}} <a ng-click="activateDebuff(debuff)" href=""><span class="fa fa-plus" style="font-size:14px;"></span></a></td>
                           
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div ng-if="resultIndex === 2">
            <div style="margin-left:5px;margin-right:5px" ng-if="characterContext.availableBardsong !== null && characterContext.availableBardsong.length > 0">
                <div class="table-responsive" style="border:none">          
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat-start="buff in characterContext.availableBardsong" ng-repeat-end>
                                <td>
                                    <button class="btn btn-primary" ng-click="activateBuff(buff)">
                                        Activate
                                    </button>
                                </td>
                                <td>{{buff.name}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div style="margin-left:5px;margin-right:5px" ng-if="characterContext.availableBardsong === null || characterContext.availableBardsong.length === 0">
                <div class="col-xs-12 col-sm-12 col-md-12" ng-repeat-start="buff in characterContext.buffs track by $index" ng-repeat-end>
                    <div class="text-center" style="margin-top:25px" ng-if="buff.bardsong === true">
                        <h3><strong>Active {{buff.name}}</strong></h3>
                        <button class="btn btn-primary" ng-click="removeBuff(buff)" style="width:60%;margin-top:15px">
                            Deactivate
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="" ng-if="resultIndex === 3">
            <div class="table-responsive" style="border:none;margin:10px">          
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Tier</th>
                            <th>Power</th>
                            <th>Description</th>
                            <th>Duration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>Cell Repair</td>
                            <td>Heal 4 HP (once)</td>
                            <td>instant</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>Adjust Mass</td>
                            <td>Walk on water as if it were solid ground</td>
                            <td>full room</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Control Mass</td>
                            <td>Greatly slow your fall(s) for no damage</td>
                            <td>full room</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>ESP</td>
                            <td>If the DM announces you’re Surprised, this retroactively negates it. Inform the DM you’re using this power.</td>
                            <td>full room</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Planar Vision</td>
                            <td>Ignore the 50% miss chance when attacking incorporeal targets</td>
                            <td>full room</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Mind Shield</td>
                            <td>Negate the effects of a failed Will saving throw (once)</td>
                            <td>instant</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>Energy Adjustment</td>
                            <td>Negate 5 points of Cold, Fire, Shock, or Sonic damage (once)</td>
                            <td>instant</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>Energy Control</td>
                            <td>Negate 10 points of Cold, Fire, Shock, or Sonic damage (once)</td>
                            <td>instant</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-xs-12" style="margin-top:15px;"></div>
    </div>
</div>
